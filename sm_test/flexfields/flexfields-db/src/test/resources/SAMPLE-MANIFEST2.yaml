---
manifestVersion: 1.0.0

name: esm
version: 1.0.0.0
displayName: Edifecs Identity Management
displayVersion: 1.5.0.0
description: This is the Identity Management component for use in all edifecs applications.

physicalComponents:
  - name: esm-service
    displayName: ESM Service
    description: This is the main Security Service for all of ESM
    type: docker
    scheduling:
      imageUri: SERVICE
      classname: com.edifecs.epp.security.service.SecurityService
      scheduler: service

    properties:
      - name: account.lockout.threshold
        description: Specifies how many unsuccessful logon attempts should happen before an account is locked.The value 0 means that the account is never going to be locked, i.e. locking out mechanism is disabled.
        scope: system
        constraint:
          dataType: string
          regex: .*
          validationMessage: Hello! you messed this up!

      - name: account.lockout.counter.reset.interval
        description: Specifies the interval in minutes that needs to pass since the last logon attempt (successful or unsuccessful) to automatically reset the number of unsuccessful logon attempts to 0.
        defaultValue: 5
        scope: system
        constraint:
          dataType: string
          regex: .*
          something: else
          validationMessage: Hello!

      - name: account.lockout.duration
        description: Specifies how long the account is going to be locked out after a certain amount of unsuccessful logon attempts.The enterred value specifies the interval in minutes. A special value of 0 means that the account is locked out until the Site / CommunityGateway Admin explicitly unlocks the account.
        defaultValue: 10
        scope: system
        constraint:
          dataType: group
          properties:
            - name: account.lockout.counter.reset.interval
              description: Specifies the interval in minutes that needs to pass since the last logon attempt (successful or unsuccessful) to automatically reset the number of unsuccessful logon attempts to 0.
              defaultValue: 5
              scope: system
              constraint:
                dataType: string
                regex: .*
                something: else
                validationMessage: Hello!

    profileProperties:
      - name: account.lockout.counter.reset.interval
        description: Specifies the interval in minutes that needs to pass since the last logon attempt (successful or unsuccessful) to automatically reset the number of unsuccessful logon attempts to 0.
        defaultValue: 5
        scope: user
        displayName: Account Lockout Counter
        constraint:
          dataType: string |text|date|boolean
          regex: .*
          something: else
          validationMessage: Hello!

      - name: user.secondary.address
        description: Specifies the secondary address of the user.
        defaultValue: 3
        scope: user
        displayName: Secondary Address
        constraint:
          dataType: group
          properties:
            - name: street.address
              description: Street Address
              displayName: Street Address
              scope: user
              constraint:
                dataType: string
                regex: .*
                validationMessage: Enter valid street address
                required: true
                restricted: false
            - name: city.name
              description: City
              displayName: City
              scope: user
              constraint:
                dataType: string
                regex: .*
                validationMessage: Enter City Name
                required: true
                restricted: false
            - name: state.name
              description: State
              displayName: State
              scope: user
              constraint:
                dataType: string
                validationMessage: Select State
                required: true
                restricted: false
                enumerations:
                  ca: california
                  wa: washington
...